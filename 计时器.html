<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<!-- 使用上方的HTML结构（可以根据需要自行微调）为基础编写JavaScript代码

    当变更任何一个select选择时，更新 result-wrapper 的内容

    当所选时间早于现在时间时，文案为 现在距离 "所选时间" 已经过去 xxxx

    当所选时间晚于现在时间时，文案为 现在距离 "所选时间" 还有 xxxx

    注意当前时间经过所选时间时候的文案变化

    注意选择不同月份的时候，日期的可选范围不一样，比如1月可以选31天，11月只有30天，注意闰年

    同样，需要注意，通过优雅的函数封装，使得代码更加可读且可维护 -->

<body>
    <select id="year-select" onchange="dateChange();update()">
            <option value="">请选择 年</option>
            </select>

    <select id="month-select" onchange="dateChange();update()">
            <option value="">请选择 月</option>
            </select>

    <select id="day-select" onchange="update()">
            <option value="">请选择 日</option>
            </select>

    <select id="hour-select" onchange="update()">
            <option value="0">00</option>
            <option value="1">01</option>
            <option value="2">02</option>
            <option value="3">03</option>
            <option value="4">04</option>
            <option value="5">05</option>
            <option value="6">06</option>
            <option value="7">07</option>
            <option value="8">08</option>
            <option value="9">09</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
            <option value="13">13</option>
            <option value="14">14</option>
            <option value="15">15</option>
            <option value="16">16</option>
            <option value="17">17</option>
            <option value="18">18</option>
            <option value="19">19</option>
            <option value="20">20</option>
            <option value="21">21</option>
            <option value="22">22</option>
            <option value="23">23</option>
            </select>

    <select id="minute-select" onchange="update()">
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                    <option value="13">13</option>
                    <option value="14">14</option>
                    <option value="15">15</option>
                    <option value="16">16</option>
                    <option value="17">17</option>
                    <option value="18">18</option>
                    <option value="19">19</option>
                    <option value="20">20</option>
                    <option value="21">21</option>
                    <option value="22">22</option>
                    <option value="23">23</option>
                    <option value="24">24</option>
                    <option value="25">25</option>
                    <option value="26">26</option>
                    <option value="27">27</option>
                    <option value="28">28</option>
                    <option value="29">29</option>
                    <option value="30">30</option>
                    <option value="31">31</option>
                    <option value="32">32</option>
                    <option value="33">33</option>
                    <option value="34">34</option>
                    <option value="35">35</option>
                    <option value="36">36</option>
                    <option value="37">37</option>
                    <option value="38">38</option>
                    <option value="39">39</option>
                    <option value="40">40</option>
                    <option value="41">41</option>
                    <option value="42">42</option>
                    <option value="43">43</option>
                    <option value="44">44</option>
                    <option value="45">45</option>
                    <option value="46">46</option>
                    <option value="47">47</option>
                    <option value="48">48</option>
                    <option value="49">49</option>
                    <option value="50">50</option>
                    <option value="51">51</option>
                    <option value="52">52</option>
                    <option value="53">53</option>
                    <option value="54">54</option>
                    <option value="55">55</option>
                    <option value="56">56</option>
                    <option value="57">57</option>
                    <option value="58">58</option>
                    <option value="59">59</option>
                   
                </select>

    <select id="second-select" onchange="update()">
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                    <option value="13">13</option>
                    <option value="14">14</option>
                    <option value="15">15</option>
                    <option value="16">16</option>
                    <option value="17">17</option>
                    <option value="18">18</option>
                    <option value="19">19</option>
                    <option value="20">20</option>
                    <option value="21">21</option>
                    <option value="22">22</option>
                    <option value="23">23</option>
                    <option value="24">24</option>
                    <option value="25">25</option>
                    <option value="26">26</option>
                    <option value="27">27</option>
                    <option value="28">28</option>
                    <option value="29">29</option>
                    <option value="30">30</option>
                    <option value="31">31</option>
                    <option value="32">32</option>
                    <option value="33">33</option>
                    <option value="34">34</option>
                    <option value="35">35</option>
                    <option value="36">36</option>
                    <option value="37">37</option>
                    <option value="38">38</option>
                    <option value="39">39</option>
                    <option value="40">40</option>
                    <option value="41">41</option>
                    <option value="42">42</option>
                    <option value="43">43</option>
                    <option value="44">44</option>
                    <option value="45">45</option>
                    <option value="46">46</option>
                    <option value="47">47</option>
                    <option value="48">48</option>
                    <option value="49">49</option>
                    <option value="50">50</option>
                    <option value="51">51</option>
                    <option value="52">52</option>
                    <option value="53">53</option>
                    <option value="54">54</option>
                    <option value="55">55</option>
                    <option value="56">56</option>
                    <option value="57">57</option>
                    <option value="58">58</option>
                    <option value="59">59</option>
                  
                </select>

    <p id="result-wrapper">现在距离 X年X月X日星期X HH:MM:SS 还有 X 天 X 小时 X 分 X 秒</p>
    <script>
        var year = document.getElementById("year-select");
        var month = document.getElementById("month-select");
        var date = document.getElementById("day-select");
        var hour = document.getElementById("hour-select");
        var min = document.getElementById("minute-select");
        var sec = document.getElementById("second-select");


        var result = document.getElementById("result-wrapper");

        var monthHead1 = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
        var monthHead2 = [31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
        var timeSelect = 0;
        var timeNow = 0;
        var week_day = '';
        var str;
        //封装一个函数，把月、日、小时等出现个位数的情况前面补充0，补充为两位，比如1变为01
        function checkTime(x) {
            if (x < 10) {
                x = "0" + x;
            }
            return x;
        }

        function isPinYear(y) {
            if (y % 4 == 0) {
                if (y % 100 != 0) {
                    return true;
                } else if (y % 400 == 0) {
                    return true;
                } else {
                    return false;
                }
            } else {
                return false;
            }
        }
        // 清空options
        function delOption(s) {
            for (var i = s.options.length - 1; i >= 1; i--)
                s.options[i] = null;


        }

        // 初始化选择列表
        function init() {
            for (var i = 1970; i < 2050; i++) {
                year.options.add(new Option(i, i));
            }
            for (var i = 1; i < 13; i++) {
                month.options.add(new Option(i, i));
            }


        };
        init();
        //  根据年月变化c初始化日的天数
        function dateChange() {

            var y = year.value;
            var m = month.value;

            if (y && m)
                delOption(date);
            if (isPinYear(y) && m == 2) {

                for (var i = 1; i <= monthHead2[m - 1]; i++) {

                    date.options.add(new Option(i, i));


                }


            } else {
                for (var i = 1; i <= monthHead1[m - 1]; i++) {


                    date.options.add(new Option(i, i));


                }

            }



        }
        // 根据选项创建日期对象

        function initdate() {

            var str = year.value + '-' + month.value + '-' + date.value + ' ' +
                hour.value + ':' + min.value + ':' + sec.value;
            return str;


        }
        //实时更新选定时间
        function update() {
            var weekday = new Array(7);
            weekday[0] = "日";
            weekday[1] = "一";
            weekday[2] = "二";
            weekday[3] = "三";
            weekday[4] = "四";
            weekday[5] = "五";
            weekday[6] = "六";
            if (year.value && month.value && date.value && hour.value && min.value && sec.value) {
                var T = new Date(initdate());
                timeSelect = T.getTime();



                week_day = "星期" + weekday[T.getDay()];

            }


        }







        //实时更新页面
        var timer = setInterval(function() {
            if (year.value && month.value && date.value && hour.value && min.value && sec.value) {
                timeNow = new Date().getTime();
                console.log(timeSelect - timeNow);

                var long = timeSelect - timeNow;
                var daym = parseInt(long / 86400000);
                var hourm = parseInt((long % 86400000) / 3600000);
                var minutem = parseInt(((long % 86400000) % 3600000) / 60000);
                var secondm = parseInt((((long % 86400000) % 3600000) % 60000) / 1000);
                if (long > 0) {
                    str = '还有'
                } else {
                    str = '已经过去';
                }

                if (parseInt(long / 1000) == 0) {
                    result.innerHTML = '现在正是选定时间';
                } else {
                    result.innerHTML = '现在距离' + year.value + '年' + month.value + '月' + date.value + '日' + ' ' + week_day + ' ' + checkTime(hour.value) + ':' + checkTime(min.value) + ':' + checkTime(sec.value) +
                        str + Math.abs(daym) + "天" + Math.abs(hourm) + "小时" + Math.abs(minutem) + "分" + Math.abs(secondm) +
                        "秒";
                }

            } else {
                result.innerHTML = '现在距离 X年X月X日星期X HH:MM:SS 还有 X 天 X 小时 X 分 X 秒';
            }
        }, 1000)
    </script>
</body>

</html>